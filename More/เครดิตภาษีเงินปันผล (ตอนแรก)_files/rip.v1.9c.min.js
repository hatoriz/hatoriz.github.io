!function(a){"use strict";function c(a,b){var c={};if(!b)return a;for(var d in a)c[d]=d in b?b[d]:a[d];return c}function g(a){for(var a,b=document.querySelectorAll("."+d.ripClass),c=0;a=b[c++];)h(a)}function h(a){i(a);var b=j(a);a.setAttribute("data-rip-width",b);var c=n(a,d.ripEnable),e=a.getAttribute("data-max-width")||!1;"img"==a.tagName.toLowerCase()||"image"==a.tagName.toLowerCase()?d.ripArtDirection?q(a,c):e?b>e&&(a.setAttribute("data-max-width",b),q(a,c)):(a.setAttribute("data-max-width",b),q(a,c)):q(a,c)}function i(a){if("img"==a.tagName.toLowerCase()||"image"==a.tagName.toLowerCase()){var b=a.getAttribute("src");b||a.setAttribute("src",d.ripPreloadImage)}else a.style.backgroundImage="url("+d.ripPreloadImage+")"}function j(a){var b=k(a),c=d.ripAvailableWidths.length,e=d.ripAvailableWidths[c-1];if(d.ripRetina)var f=o(),b=b*f;for(var h,g=c-1;h=d.ripAvailableWidths[g--];)h>=b&&(e=h);return e}function k(a){if("img"==a.tagName.toLowerCase()||"image"==a.tagName.toLowerCase()){var b=a.parentNode;if("getComputedStyle"in window)var e=window.getComputedStyle(a),c=e.getPropertyValue("width");else var c=a.currentStyle.width;if(c.search("%")>=0)var f=c.replace("%","")/100,g=b.clientWidth*f;else if(c.search("px")>=0)var h=c.replace("px",""),g=h;else var g=b.clientWidth;if(0==g)var i=d.ripAvailableWidths.length,g=d.ripAvailableWidths[i-1]}else{var b=a;if("BODY"==b.tagName||"body"==b.tagName)var g=window.innerWidth;else var g=b.clientWidth||window.innerWidth}return g}function l(a){var b=new RegExp("http://(fp[0-9]{0,1}|pe[0-9]{0,1}|dev.p[0-9]{0,1}|p[0-9]{0,1}|dev.e[0-9]{0,1}|e[0-9]{0,1}|dev.c[0-9]{0,1}|c[0-9]{0,1}|dev.g[0-9]{0,1}|g[0-9]{0,1}).(s1sf|fsanook|isanook).com/([a-z]{2}|[0-9]+)/([0-9]+)/"),c=b.exec(a);if(c)return!0;var d=new RegExp("^/(p_s1sf_[a-z]{2}_[0-9]+|FPShareImg|c_s1sf_[a-z]{2}_[0-9]+|e_s1sf_[a-z]{2}_[0-9]+)/"),e=d.exec(a);if(e)return!0;var f=new RegExp("^http(s)?://([a-z0-9.]+).sanook.com/(.*)"),g=f.exec(a);return g?!0:!1}function m(a){return a.replace(/^\s+|\s+$/g,"")}function n(a,b){var c=m(a.getAttribute(d.ripImgSrc));if(b&&0!=l(c)){var f=a.getAttribute("data-rip-width"),g=a.getAttribute("data-mode");if("resize_crop"==g||"crop"==g){var h=a.getAttribute("data-width"),i=a.getAttribute("data-height");if("resize_crop"==g){g="rc";var j=h/i,k=Math.floor(f/j),n="w"+f+"h"+k}else if("crop"==g){g="c";var n="w"+h+"h"+i}}else{g="r";var n="w"+f}var o=a.getAttribute("data-yAxis")||"0",q=a.getAttribute("data-xAxis")||"0",s=a.getAttribute("data-mRatio")||"1",t="ya"+o+"xa"+q+"m"+s;d.cid;var v=r.encode(c),w="jpg",x=p(a);if(d.ripUrlPattern){var k=k||"",y=d.ripUrlPattern;y=y.replace("{width}",f),y=y.replace("{height}",k);var e=x+y}else var e=x+g+"/"+n+"/"+t+"/"+v+"."+w}else var e=c;return e}function o(){var a=window.devicePixelRatio;return a}function p(a){var b=d.ripUrlBase;if("default"==b){var c=m(a.getAttribute(d.ripImgSrc)),e=new RegExp("(http|https)://(.*).(s1sf.com|isanook.com)/([a-z]{1,2})/([0-9]{1,2})/([a-z]{2})/(.*)"),f=e.exec(c);if(f){var g=f[1],h=f[2],i=f[3],j=f[4],k=f[5];f[6],b=g+"://"+h+"."+i+"/"+j+"/"+k+"/rp/"}else{var e=new RegExp("(http|https)://(.*).fsanook.com/([a-z]{1,2})/([0-9]+)/([0-9]+)/(.*)"),f=e.exec(c);if(f){var g=f[1],h=f[2];f[3],b=g+"://"+h+".fsanook.com/rp/"}else{var e=new RegExp("/(p_s1sf_[a-z]{2}_[0-9]+|FPShareImg/static_firstpage|c_s1sf_[a-z]{2}_[0-9]+|e_s1sf_[a-z]{2}_[0-9]+)/([a-z]{2})/"),f=e.exec(c);if(f){var k=f[1];f[2],b="http://appx.sanook.com/rip/"}else b="http://appx.sanook.com/rip/"}}}else"debug"==b&&(b="http://appx.sanook.com/rip/");return b}function q(a,b){var c=new Image;c.onload=function(){"img"==a.tagName.toLowerCase()||"image"==a.tagName.toLowerCase()?a.setAttribute("src",b):a.style.backgroundImage="url("+b+")"},c.src=b}a.options=a.options||{};var e,b={ripLoad:!0,ripEnable:!0,ripRetina:!0,ripArtDirection:!0,ripImgSrc:"data-src",ripClass:"rip",ripUrlBase:"default",ripUrlPattern:!1,ripAvailableWidths:[80,140,300,620,1240],ripPreloadImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},d=c(b,a.options),f=function(){clearTimeout(e),e=setTimeout(g,250)};d.ripLoad&&(window.addEventListener?(window.addEventListener("DOMContentLoaded",function(){g(),window.removeEventListener("load",g,!1)},!1),window.addEventListener("load",g,!1),window.addEventListener("resize",f,!1),window.addEventListener("orientationchange",g,!1)):(window.attachEvent&&window.attachEvent("onload",g),window.attachEvent&&window.attachEvent("onresize",f)));var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c,d,e,f,g,h,i,b="",j=0;for(a=r._utf8_encode(a);j<a.length;)c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),b=b+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h)+this._keyStr.charAt(i);return b},decode:function(a){var c,d,e,f,g,h,i,b="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),i=this._keyStr.indexOf(a.charAt(j++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,b+=String.fromCharCode(c),64!=h&&(b+=String.fromCharCode(d)),64!=i&&(b+=String.fromCharCode(e));return b=r._utf8_decode(b)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(192|d>>6),b+=String.fromCharCode(128|63&d)):(b+=String.fromCharCode(224|d>>12),b+=String.fromCharCode(128|63&d>>6),b+=String.fromCharCode(128|63&d))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}}}(this.rip=this.rip||{});