var SanookNotification=function(t){var n=t("body"),o=!1,i=["http://c.isanook.com/no/0/js/socket.io.min.1.0.js"],a=["http://p1.isanook.com/sh/0/cs/sanook-notification-v1.015.css"],e="dev.noti.sanook.com",r=[8001,8002];-1==window.location.hostname.indexOf("dev.")&&(e="notification.sanook.com",r=[8001,8002,8003,8004,8005,8006,8007,8008,8009,8010,9001,9002,9003,9004,9005,9006,9007,9008,9009,9010]);var c=function(t){for(var n=document.body,o=t.length,i=0;o>i;++i){var a=document.createElement("script");a.type="text/javascript",a.src=t[i],n.appendChild(a)}},s=function(n){for(var o=n.length,i="",a=0;o>a;++a)i+='<link href="'+n[a]+'" rel="stylesheet" />';t(i).appendTo("head")},f=function(t){var n=t.length;if(n>0){for(var o=0;n>o;++o)if(null!=window.navigator.appVersion.match(t[o].name))return!0;return!1}return!0},p=function(t){var n=t.length;if(n>0){for(var o=0;n>o;++o)if(null!=window.location.host.match(t[o].name))return!0;return!1}return!0};return{init:function(){s(a),c(i)},connectSocket:function(){var i={transports:["websocket"]};if(-1!=navigator.appVersion.indexOf("MSIE")){var a=parseFloat(navigator.appVersion.split("MSIE")[1]);8>=a&&(i={transports:["jsonp-polling"]})}var c=0,s=r.length-1,d=r[Math.floor(Math.random()*(s-c+1)+c)];if("undefined"==typeof io)return!1;var l=io.connect(e+":"+d,i);l.on("notification",function(i){for(var a=i.length,e=0;a>e;++e)if(o!==!0&&!1!==f(i[e].user_agent)&&0!=p(i[e].domains)){l.emit("sendview",i[e].campaign_id);var r=387;if(-1==navigator.appVersion.indexOf("MSIE")&&matchMedia("only screen and (max-width: 767px) and (orientation: portrait)").matches)var r=300;var c=t(document).width()-r+"px";t(i[e].message).appendTo(n).css("left",c).stop().animate({bottom:0}),o=!0}t(".noti-detect").click(function(){var n=t(this),o=n.attr("href");return l.emit("sendclick",n.attr("data-campaign"),n.attr("data-link")),"#"==o.slice(-1)?(alert(n.attr("rel")),!1):void 0}),t(".sa-notification-close").click(function(n){n.preventDefault();var o=t(".sa-notification-container");o.stop().animate({bottom:"-=105"}),setTimeout(o.remove,1e3)})})}}}(jQuery);SanookNotification.init(),setTimeout(SanookNotification.connectSocket,5e3);